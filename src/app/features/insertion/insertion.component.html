<div class="container mt-4">
  <h1 class="mb-4">CATÁLOGO DE INSERCIONES</h1>

  <!-- Búsqueda -->
  <div class="d-flex flex-wrap justify-content-between align-items-center mb-3 gap-2">
    <input type="text" class="form-control w-50" [(ngModel)]="search" 
           (ngModelChange)="onSearch($event)" placeholder="Buscar inserciones..." />
  </div>

  <!-- Tabla de inserciones -->
  <div class="table-responsive">
    <table class="table table-striped table-hover align-middle">
      <thead class="table-light">
        <tr>
          <th (click)="onSortChange('code')">Código</th>
          <th (click)="onSortChange('shape')">Forma</th>
          <th (click)="onSortChange('station_size')">Tamaño estación</th>
          <th (click)="onSortChange('measurement')">Medición</th>
          <th (click)="onSortChange('angle')">Ángulo</th>
          <th (click)="onSortChange('clarity')">Claridad</th>
          <!--<th (click)="onSortChange('lifecycle_statuses')">Vida (%)</th>-->
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let insertion of insertions">
          <td>{{ insertion.code }}</td>
          <td>{{ insertion.shape }}</td>
          <td>{{ insertion.station_size }}</td>
          <td>{{ insertion.measurement }}</td>
          <td>{{ insertion.angle }}</td>
          <td>{{ insertion.clarity }}</td>
          <!--<td>{{ insertion.lifecycle_statuses }}</td>-->
        </tr>
        <tr *ngIf="insertions.length === 0">
          <td colspan="7" class="text-center text-muted py-3">No se encontraron inserciones</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Paginación -->
  <div class="d-flex flex-wrap justify-content-between align-items-center mt-3 gap-2">
    <div>Total de inserciones: <strong>{{ total }}</strong></div>

    <ngb-pagination [collectionSize]="total" [(page)]="currentPage" 
                    [pageSize]="pageSize" (pageChange)="onPageChange($event)">
    </ngb-pagination>

    <select class="form-select w-auto" [(ngModel)]="pageSize" (ngModelChange)="onPageSizeChange($event)">
      <option [ngValue]="5">5 por página</option>
      <option [ngValue]="10">10 por página</option>
      <option [ngValue]="20">20 por página</option>
    </select>
  </div>
</div>
